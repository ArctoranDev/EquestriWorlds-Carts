Carts:
    type: world
    debug: true
    events:
    
        on player clicks block with diamond_spade:
        - if <context.item.unbreakable> && <context.item.durability> <= 60:
            - determine cancelled
        - narrate <context.item>
        
        on player right clicks entity with diamond_spade:
        - if <context.item.unbreakable> && <context.item.durability> <= 60:
            - if <context.entity.entity_type||null> == HORSE:
                - narrate <context.entity>
                - spawn armor_stand <context.entity.location.backward_flat[1.5]> save:horseCart
                - define horseCart <entry[horseCart].spawned_entity>
                - equip <def[horseCart].as_entity> head:<context.item>
                - adjust <def[horseCart].as_entity> "attach_to:<context.entity>|l@0,0,-1.5|true"
            - else if <context.entity.entity_type||null> == ARMOR_STAND:
                - if <context.item.display.split[<&sp>].get[1].to_lowercase> == "light":
                    - define color "<context.item.display.split[<&sp>].get[1].to_titlecase><context.item.display.as_element.split[<&sp>].get[2].to_titlecase>"
                - else:
                    - define color <context.item.display.split[<&sp>].get[1].to_lowercase>
                - define vehicle <def[color]><context.entity.equipment.helmet.display.as_element.split[<&sp>].get[3].to_lowercase>
                - equip <context.entity> head:<def[vehicle].as_item>
        - determine cancelled