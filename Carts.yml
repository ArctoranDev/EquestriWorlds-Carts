Carts:
    type: world
    debug: true
    events:
    
        on player clicks block with diamond_spade:
        - if <context.item.unbreakable> && <context.item.durability> <= 60:
            - determine cancelled
        - narrate <context.item>
        
        on player right clicks entity with diamond_spade:
        - if <context.item.unbreakable> && <context.item.durability> <= 60:
            - if <context.entity.entity_type||null> == HORSE:
                - narrate <context.entity>
                - spawn armor_stand <context.entity.location.backward_flat[1.5]> save:horseCart
                - define horseCart <entry[horseCart].spawned_entity>
                - equip <def[horseCart].as_entity> head:<context.item>
                - adjust <def[horseCart].as_entity> "attach_to:<context.entity>|l@0,0,-1.5|true"
            - else if <context.entity.entity_type||null> == ARMOR_STAND:
                - if <context.item.durability> >= 33 && <context.item.durability> <= 48:
                    - if <context.item.display.starts_with[<&f>Light]>:
                        - define newColor "<context.item.display.split[<&sp>].get[1]><context.item.display.split[<&sp>].get[2]>"
                    - else:
                        - define newColor "<context.item.display.split[<&sp>].get[1]>"
                    - if <context.entity.equipment.helmet.display.starts_with[<&f>Light]>:
                        - define oldColor "<context.item.display.split[<&sp>].get[1]><context.item.display.split[<&sp>].get[2]>"
                    - else:
                        - define oldColor "<context.item.display.split[<&sp>].get[1]>"
                    - narrate <def[oldColor]>
                    - narrate <def[newColor]>
        - determine cancelled